!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){document.addEventListener("DOMContentLoaded",e=>{if(void 0===window.wpcf7_stripe)return void console.error("window.wpcf7_stripe is not defined.");if("function"!=typeof window.Stripe)return void console.error("window.Stripe is not defined.");const t=Stripe(wpcf7_stripe.publishable_key),r=t.elements();document.addEventListener("wpcf7submit",e=>{const n=e.detail.unitTag,i=document.querySelector(`#${n} form`),s=n+"-ve-stripe-card-element",o=i.querySelector(".wpcf7-stripe .wpcf7-form-control-wrap"),a=i.querySelector(".wpcf7-stripe button.first"),d=i.querySelector(".wpcf7-stripe button.second"),c=i.querySelector('[name="_wpcf7_stripe_payment_intent"]');if(!c)return;c.setAttribute("value","");const l=e=>{const t=document.createElement("li");t.setAttribute("id",s),t.insertAdjacentText("beforeend",e.message),i.closest(".wpcf7").querySelector(".screen-reader-response ul").appendChild(t)},u=e=>{const t=o.querySelector(".wpcf7-form-control");t.classList.add("wpcf7-not-valid"),t.setAttribute("aria-describedby",s);const r=document.createElement("span");r.setAttribute("class","wpcf7-not-valid-tip"),r.setAttribute("aria-hidden","true"),r.insertAdjacentText("beforeend",e.message),o.appendChild(r),o.querySelectorAll("[aria-invalid]").forEach(e=>{e.setAttribute("aria-invalid","true")}),t.closest(".use-floating-validation-tip")&&(t.addEventListener("focus",e=>{r.setAttribute("style","display: none")}),r.addEventListener("mouseover",e=>{r.setAttribute("style","display: none")}))},f=()=>{i.closest(".wpcf7").querySelectorAll(".screen-reader-response li#"+s).forEach(e=>{e.remove()}),o.querySelectorAll(".wpcf7-not-valid-tip").forEach(e=>{e.remove()}),o.querySelectorAll("[aria-invalid]").forEach(e=>{e.setAttribute("aria-invalid","false")}),o.querySelectorAll(".wpcf7-form-control").forEach(e=>{e.removeAttribute("aria-describedby"),e.classList.remove("wpcf7-not-valid")})};if("payment_required"===e.detail.status){const s=e.detail.apiResponse.stripe.payment_intent;s.id&&c.setAttribute("value",s.id);const p=r.getElement("card")||r.create("card");p.mount(`#${n} .wpcf7-stripe .card-element`),p.clear(),o.classList.remove("hidden"),a.classList.add("hidden"),d.classList.remove("hidden"),d.disabled=!0,p.addEventListener("change",e=>{if(f(),e.error){const t={message:e.error.message};l(t),u(t),d.disabled=!0}else d.disabled=!1}),d.addEventListener("click",e=>{d.disabled=!0,i.classList.add("submitting"),t.confirmCardPayment(s.client_secret,{payment_method:{card:p}}).then(e=>{if(f(),i.classList.remove("submitting"),e.error){const t={message:e.error.message};l(t),u(t)}else"succeeded"===e.paymentIntent.status&&wpcf7.submit(i)})})}else o.classList.add("hidden"),a.classList.remove("hidden"),d.classList.add("hidden")})})}]);